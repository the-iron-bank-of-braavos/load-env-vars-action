name: Load Env

on: push
     
jobs:
  load-env:
    runs-on: ubuntu-latest
    outputs:
      author: ${{ env.AUTHOR }}
      version: ${{ env.VERSION }}
    steps:
      - name: "Launch action"
        id: action-env
        uses: Steph0/dotenv-configserver@main
        with:
          repository: "the-iron-bank-of-braavos/load-env"
          token: "${{ secrets.GITHUB_TOKEN }}"
      
      # You should see your .env config in 'env'
      - name: "See exported values"
        run: env
        
      - name: Test
        run: |
          echo ${{ env.AUTHOR }}
          echo ${{ env.VERSION }}
          echo ${{ steps.action-env.outputs.AUTHOR }}
          echo ${{ steps.action-env.outputs.VERSION }}

  env-test:
    runs-on: ubuntu-latest
    needs: load-env
    steps:
     - name: Test
       run: |
          echo ${{ needs.load-env.outputs.AUTHOR }}
          echo ${{ needs.load-env.outputs.VERSION }}
#          echo ${{ needs.load-env.outputs.author }}
#          echo ${{ needs.load-env.outputs.version }}

